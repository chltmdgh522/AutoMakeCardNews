<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>A.M.C.N</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style_em.css">
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="/logo/logo2.png" type="image/x-icon">
    <!-- Google Fonts ë§í¬ ì¶”ê°€ -->
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&family=Noto+Sans+KR&family=Do+Hyeon&family=Gugi&family=Jua&family=Black+Han+Sans&family=Gamja+Flower&family=Dokdo&family=Sunflower:wght@300;500;700&family=Poor+Story&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="/css/cardInformation.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/097a6f4f17.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
    <style>
        #save5 {
            background-color: black;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 16px;
        }


        #popup5 {
            display: none;
            position: fixed;
            left: 800px;
            width: 120%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .popup-content5 {
            background: white;
            padding: 20px;
            border-radius: 8px;
            width: 300px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .popup-content5 h2 {
            margin-top: 0;
        }

        .popup-content5 label {
            display: block;
            margin-bottom: 10px;
        }

        .button-group5 {
            margin-top: 20px;
        }

        .btn {
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 14px;
            color: white;
            margin-right: 10px;
        }

        .download-btn5 {
            background-color: #4CAF50;
        }

        .cancel-btn5 {
            background-color: #f44336;
        }

        .close-btn5 {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 20px;
            cursor: pointer;
        }


        .center-block {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column; /* ì„¸ë¡œë¡œ ì •ë ¬ */
            margin: 0; /* ê¸°ë³¸ ì—¬ë°± ì œê±° */
        }

        #time, .center-block > div {
            margin: 10px; /* ìœ„ìª½ ë‘ div ê°„ê²© ì—†ì• ê¸° */
            padding: 0; /* í•„ìš” ì‹œ íŒ¨ë”©ë„ ì œê±° */
        }
        .main_container{
            width: 500px;
            height: 400px;
        }

        title {
            background-color: black;
        }

        #canvas2 {
            background-color: whitesmoke;
        }




        /* ì˜¤ë²„ë ˆì´ ìŠ¤íƒ€ì¼ */
        .overlay-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none;
            flex-direction: column; /* ìˆ˜ì§ ì •ë ¬ */
            justify-content: center; /* ìˆ˜í‰ ì¤‘ì•™ ì •ë ¬ */
            align-items: center; /* ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
            color: white;
            font-size: 30px;
        }

        #time {
            color: red;
            font-weight: bold;
            font-size: 40px; /* íƒ€ì´ë¨¸ í¬ê¸° */
            margin-bottom: 10px; /* íƒ€ì´ë¨¸ì™€ ë¬¸êµ¬ ì‚¬ì´ ê°„ê²© */
        }
    </style>

</head>

<body>
<header id="header">
    <a href="/" style="text-decoration: none">
        <!--    <img src="/logo/AMCNicon.png" alt="">-->
        <p id="yamlogo">AMCN</p>
    </a>
</header>

<div id="main_display">
    <aside class="tools">
        <ul>
            <li>
                <button id="drawing" class="tool">
                    ğŸ–Š
                    <span class="tooltip">Pen</span>
                </button>
            </li>

            <li>
                <button id="square" class="tool">
                    â–¡
                    <span class="tooltip">Square</span>
                </button>
            </li>
            <li>
                <button id="fill_square" class="tool">
                    â– 
                    <span class="tooltip">fill_square</span>
                </button>
            </li>

            <li>
                <button id="filter" class="tool">
                    â–¥
                    <span class="tooltip">Filter</span>
                </button>
            </li>
            <li>
                <button id="reset" class="tool">
                    ğŸ—‘
                    <span class="tooltip">Delete</span>
                </button>
            </li>
            <li>
                <button id="info" class="tool">
                    â“
                    <span class="tooltip">Info</span>
                </button>
            </li>
        </ul>
        <li>
            <button id="category" class="tool">
                ğŸ—ï¸
                <span class="tooltip">Category(post)</span>
            </button>


            <div id="popup" class="popup">
                <form id="imageForm" method="post" enctype="multipart/form-data"
                      th:object="${cardNews}">

                    <input type="hidden" id="imageData" name="imageData">
                    <h3 style="font-weight: bold">ì¹´ë“œ ë‰´ìŠ¤ ê²Œì‹œ</h3>
                    <div th:if="${#fields.hasGlobalErrors()}">
                        <p class="field-error" th:each="err : ${#fields.globalErrors()}"
                           th:text="${err}">ì „ì²´ ì˜¤ë¥˜ ë©”ì‹œì§€</p>
                    </div>
                    <div class="category">
                        <label><input type="radio" th:field="*{category}" name="category" value="IT" th:checked
                                      required> IT</label>
                        <label><input type="radio" th:field="*{category}" name="category" value="ê³¼í•™" required>
                            ê³¼í•™</label>
                        <label><input type="radio" th:field="*{category}" name="category" value="ìŠ¤í¬ì¸ " required>
                            ìŠ¤í¬ì¸ </label>
                        <label><input type="radio" th:field="*{category}" name="category" value="ê²½ì œ" required>
                            ê²½ì œ</label>
                        <label><input type="radio" th:field="*{category}" name="category" value="ì˜ˆìˆ " required>
                            ì˜ˆìˆ </label>
                    </div>
                    <div>
                        <label for="title">ì œëª©</label>
                        <input type="text" th:field="*{title}" id="title" name="title"

                               required>
                    </div>
                    <div>
                        <label for="content">ë‚´ìš©</label>
                        <textarea id="content" name="content" th:field="*{content}"
                                  rows="4"
                                  required></textarea>
                    </div>
                    <button type="button" id="postButton"
                            onclick="saveImage()">ê²Œì‹œ
                    </button>
                </form>
            </div>
        </li>
        <ul class='files'>
            <li><input type="file" accept="image/*" id='file'/></li>
            <li><label for="file">ğŸ“‚</label></li>
            <li>
                <button id="save5">ğŸ’¾</button>
            </li>
        </ul>
    </aside>

    <main>
        <canvas id="imageCanvas"></canvas>
        <button id="speakerButton" class="speaker-btn">ğŸ”Š</button>
    </main>

    <aside class="tools_sett">
        <div class="container" style="margin-bottom: -138px;">
            <input type="color" id="text_color"/>
            <label for="text_color" class="color_tool">ìƒ‰ìƒ</label>
            <input type="color" id="background_color" value="#ffffff"/>
            <label for="background_color" class="color_tool">ë°°ê²½ìƒ‰</label>
        </div>
        <div class='ranges' style="margin-bottom: -55px;">
            <div id="canvas_range">
                <input type="text" id="canvas_width" value="750">
                X
                <input type="text" id="canvas_height" value="750">
                <label for="canvas_range" class="range_tool">Canvas</label>
            </div>
            <div id="size_box" style="display: none;">
                <input type="range" id="line_width" min="1" max="10" value="5" step="0.1"/>
                <label for="line_width" class="range_tool">ì‚¬ì´ì¦ˆ</label>
            </div>
        </div>
        <div>
            <div class="styled-section">
                <div class="input-group">
                    <input name="imageCreate" id="imageCreate" class="styled-input"/>
                    <button id="imageButton" class="styled-button">ì´ë¯¸ì§€ ìƒì„±</button>
                </div>
                <div class="text-button-group" style="margin-top: 75px;">
                    <button id="textbutton" class="styled-button">í…ìŠ¤íŠ¸ ì¶”ê°€</button>
                </div>
            </div>

            <div id="popup1" class="popup1">
                <h3 style="font-weight: bold">í…ìŠ¤íŠ¸ ì¶”ê°€</h3>
                <textarea id="textInput" placeholder="í…ìŠ¤íŠ¸ ì…ë ¥"></textarea>
                <input type="color" id="textColorPicker" value="#000000">
                <input type="number" id="textSizeInput" placeholder="í…ìŠ¤íŠ¸ í¬ê¸°" min="10" max="100" value="40">
                <select id="fontWeightSelect">
                    <option value="bold">Bold</option>
                    <option value="normal">Normal</option>
                </select>
                <select id="fontFamilySelect">
                    <option value="Do Hyeon">Do Hyeon</option>
                    <option value="Nanum Gothic">Nanum Gothic</option>
                    <option value="Noto Sans KR">Noto Sans KR</option>
                    <option value="Gugi">Gugi</option>
                    <option value="Jua">Jua</option>
                    <option value="Black Han Sans">Black Han Sans</option>
                    <option value="Gamja Flower">Gamja Flower</option>
                    <option value="Dokdo">Dokdo</option>
                    <option value="Sunflower">Sunflower</option>
                    <option value="Poor Story">Poor Story</option>
                </select>
                <button id="addTexTAIButton2" style="background-color: red; margin-bottom: 5px;">AI ë¬¸êµ¬ ìƒì„±</button>
                <button id="addTextButton">í…ìŠ¤íŠ¸ ì¶”ê°€</button>
            </div>
        </div>
        <!--        <input type="file" id="loadJsonFile" accept="application/json">-->
        <!--        <button id="loadJson">Load from JSON</button>-->
        <!--        <button id="saveJson">Save as JSON</button>-->
    </aside>
</div>
<!-- ì´ë¯¸ì§€ ë° ì˜¤ë””ì˜¤ ì €ì¥ ëª¨ë‹¬ -->
<div id="popup5" class="popup5">
    <div class="popup-content5">
        <span id="close5" class="close-btn5">&times;</span>
        <h2 style="font-weight: bold;">Choose Options</h2>
        <form id="popup-form5" style="margin-top: 10px">
            <label>
                <input type="checkbox" name="options5" value="image">
                ì¹´ë“œë‰´ìŠ¤
            </label>
            <label>
                <input type="checkbox" name="options5" value="audio">
                ì˜¤ë””ì˜¤
            </label>
            <label>
                <input type="checkbox" name="options5" value="video">
                ë™ì˜ìƒ
            </label>
            <div class="button-group5">
                <button type="submit" class="btn download-btn5">Download</button>
                <button type="button" id="cancel5" class="btn cancel-btn5">Cancel</button>
            </div>
        </form>
    </div>
</div>

<!-- í…ìŠ¤íŠ¸ í¸ì§‘ ëª¨ë‹¬ -->
<div id="textEditPopup" class="popup2">
    <h3>ì—…ë°ì´íŠ¸</h3>
    <div style="margin-bottom: 10px;">

        <textarea id="popupTextInput"></textarea>
    </div>
    <div style="margin-bottom: 10px;">
        <input type="color" id="popupTextColorPicker">
    </div>
    <div style="margin-bottom: 10px;">
        <input type="number" id="popupTextSizeInput" min="10" max="100">
    </div>
    <div style="margin-bottom: 10px;">
        <select id="popupFontWeightSelect" style="padding: 5px; border: 1px solid #ccc; border-radius: 3px;">
            <option value="normal">Normal</option>
            <option value="bold">Bold</option>
        </select>
    </div>
    <div style="margin-bottom: 10px;">
        <select id="popupFontFamilySelect" style="padding: 5px; border: 1px solid #ccc; border-radius: 3px;">
            <option value="Nanum Gothic">Nanum Gothic</option>
            <option value="Noto Sans KR">Noto Sans KR</option>
            <option value="Do Hyeon">Do Hyeon</option>
            <option value="Gugi">Gugi</option>
            <option value="Jua">Jua</option>
            <option value="Black Han Sans">Black Han Sans</option>
            <option value="Gamja Flower">Gamja Flower</option>
            <option value="Dokdo">Dokdo</option>
            <option value="Sunflower">Sunflower</option>
            <option value="Poor Story">Poor Story</option>
        </select>
    </div>
    <button id="updateTextButton">ì—…ë°ì´íŠ¸</button>
    <button id="closeTextPopup" style="  margin-top: 15px;
        width: 100%;
        padding: 10px;
        background-color: red;
       border: none;
        border-radius: 5px;
        color: #fff;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s ease; /* ì¶”ê°€: í˜¸ë²„ íš¨ê³¼ */
        ">ë‹«ê¸°
    </button>
</div>

<!-- ë¹ˆì‚¬ê°í˜• ì§€ì • íŒì—… -->
<div id="colorPopup" class="popup3">
    <div class="popup3-content">
        <span id="closeColorPopup" class="close">X</span>
        <h3 style="font-family: 'Jua', sans-serif; padding-left: 5px; margin-bottom: 15px;">
            <i class="fas fa-square" style="margin-right: 5px;"></i>
            ë¹ˆì‚¬ê°í˜• ìƒ‰ê¹”
        </h3>
        <div class="color-palette" style="margin-bottom: 15px;">
            <div class="color-circle" style="background-color: #FF0000; margin-right: 35px;" data-color="#FF0000"></div>
            <div class="color-circle" style="background-color: #00FF00; margin-right: 35px;" data-color="#00FF00"></div>
            <div class="color-circle" style="background-color: #0000FF; margin-right: 35px;" data-color="#0000FF"></div>
            <div class="color-circle" style="background-color: #FFFF00; margin-right: 35px;" data-color="#FFFF00"></div>
            <div class="color-circle rainbow-circle" id="rainbowCircle1"> + </div> <!-- ë¬´ì§€ê°œ ë²„íŠ¼ -->
            <!-- ê¸°ë³¸ ìƒ‰ìƒ ì„ íƒê¸° (íˆ¬ëª…í•˜ê²Œ ì²˜ë¦¬) -->
            <input type="color" id="rectColorPicker" class="color-picker-transparent">
        </div>
        <button class="rect_button" id="updateColorButton">ë³€ê²½</button>
    </div>
</div>

<!-- ìƒ‰ì±„ìš´ ì‚¬ê°í˜• ì§€ì • íŒì—… -->
<div id="colorPopup2" class="popup4">
    <div class="popup4-content">
        <span id="closeColorPopup2" class="close2">X</span>
        <h3 style="font-family: 'Jua', sans-serif; padding-left: 5px; margin-bottom: 15px;">
            <i class="fas fa-square" style="margin-right: 5px;"></i>
            ì‚¬ê°í˜• ìƒ‰ê¹”
        </h3>
        <!-- ìƒ‰ìƒ íŒ”ë ˆíŠ¸ ì¶”ê°€ -->
        <div class="color-palette" style="margin-bottom: 15px;">
            <div class="color-circle" style="background-color: #FF0000; margin-right: 35px;" data-color="#FF0000"></div>
            <div class="color-circle" style="background-color: #00FF00; margin-right: 35px;" data-color="#00FF00"></div>
            <div class="color-circle" style="background-color: #0000FF; margin-right: 35px;" data-color="#0000FF"></div>
            <div class="color-circle" style="background-color: #FFFF00; margin-right: 35px;" data-color="#FFFF00"></div>
            <div class="color-circle rainbow-circle" id="rainbowCircle2"> + </div> <!-- ë¬´ì§€ê°œ ë²„íŠ¼ -->
            <!-- ê¸°ë³¸ ìƒ‰ìƒ ì„ íƒê¸° (íˆ¬ëª…í•˜ê²Œ ì²˜ë¦¬) -->
            <input type="color" id="rectColorPicker2" class="color-picker-transparent">
        </div>
        <button class="rect_button2" id="updateColorButton2">ë³€ê²½</button>
    </div>
</div>

<!-- íœ ìƒ‰ê¹” ì§€ì • íŒì—… -->
<div id="colorPopup3" class="popup5">
    <div class="popup5-content">
        <span id="closeColorPopup3" class="close3">
            <i class="fas fa-times"></i>
        </span>
        <h3 style="font-family: 'Jua', sans-serif; padding-left: 5px; margin-bottom: 15px;">
            <i class="fas fa-paint-brush" style="margin-right: 5px;"></i>
            íœ ìƒ‰ìƒ
        </h3>
        <!-- ìƒ‰ìƒ íŒ”ë ˆíŠ¸ ì¶”ê°€ -->
        <div class="color-palette" style="margin-bottom: 15px;">
            <div class="color-circle" style="background-color: #FF0000; margin-right: 35px;" data-color="#FF0000"></div>
            <div class="color-circle" style="background-color: #00FF00; margin-right: 35px;" data-color="#00FF00"></div>
            <div class="color-circle" style="background-color: #0000FF; margin-right: 35px;" data-color="#0000FF"></div>
            <div class="color-circle" style="background-color: #FFFF00; margin-right: 35px;" data-color="#FFFF00"></div>
            <div class="color-circle rainbow-circle" id="rainbowCircle3"> + </div> <!-- ë¬´ì§€ê°œ ë²„íŠ¼ -->
            <!-- ê¸°ë³¸ ìƒ‰ìƒ ì„ íƒê¸° (íˆ¬ëª…í•˜ê²Œ ì²˜ë¦¬) -->
            <input type="color" id="rectColorPicker3" class="color-picker-transparent">
        </div>
        <button class="rect_button3" id="updateColorButton3">ë³€ê²½</button>
    </div>
</div>


<div id="overlay5"></div>
<div id="filterPopup5">
    <h3 style="font-family: 'Jua', sans-serif; padding-left: 10px;">
        <i class="fas fa-camera-retro fa-lg" style="margin-right: 8px; font-size: 24px;"></i>í•„í„° ì„ íƒ
    </h3>
    <form id="filterForm5">
        <div class="filter-option5">
            <input type="radio" id="blur5" name="filter5" value="blur">
            <label for="blur5">íë¦¬ê²Œ</label>
        </div>
        <div class="filter-option5">
            <input type="radio" id="brighten5" name="filter5" value="brighten">
            <label for="brighten5">ë°ê²Œ</label>
        </div>
        <div class="filter-option5">
            <input type="radio" id="contrast5" name="filter5" value="contrast">
            <label for="contrast5">ëŒ€ë¹„ ì¡°ì •</label>
        </div>
        <div class="filter-option5">
            <input type="radio" id="grayscale5" name="filter5" value="invert">
            <label for="grayscale5">í‘ë°±</label>
        </div>
        <div class="filter-option5">
            <input type="radio" id="sepia5" name="filter5" value="sepia">
            <label for="sepia5">ì„¸í”¼ì•„</label>
        </div>
        <div class="filter-option5">
            <input type="radio" id="default" name="filter5" value="default">
            <label for="default">ì—†ìŒ</label>
        </div>
    </form>
    <div id="buttonWrapper5">
        <button id="applyFilter5">ì ìš©</button>
        <button id="closePopup5">ë‹«ê¸°</button>
    </div>
</div>

<div class="overlay-container">
    <div>ì´ë¯¸ì§€ë¥¼ ìƒì„± ì¤‘ì…ë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...</div>
    <div id="time">00:40</div>
    <div class="center-block">

        <canvas id="canvas2"> <!-- canvasëŠ” ê·¸ë¦¼, ì´ë¯¸ì§€ë¥¼ ê·¸ë¦´ ìˆ˜ ìˆê²Œí•˜ëŠ” íƒœê·¸ -->
        </canvas>
        <span style="position: absolute; top: 45%; left: 50%; transform: translateX(-50%); color: black; font-weight: bold">
        â¬†ï¸ ë°©í–¥í‚¤ë¥¼ ëˆ„ë¥´ë©´ì„œ ì¥ì• ë¬¼ì„ í”¼í•˜ì„¸ìš”!
            </span>
    </div>


</div>

<div class="popup-background150">
    <!-- íŒì—… ì»¨í…Œì´ë„ˆ -->
    <div class="popup-container150">
        <!-- ìƒë‹¨ ì¤‘ì•™ì— ë¬¸ì˜ ë¬¸êµ¬ ì¶”ê°€ -->
        <div class="inquiry-text150">
            <a href="/chat" style="color: black; text-decoration: none; font-weight: bold; font-size: large;">
                â­ë¬¸ì˜í•˜ì‹¤ê²Œ ìˆìœ¼ë©´ ì´ ë¬¸êµ¬ë¥¼ í´ë¦­!â­
            </a>
        </div>


        <!-- í˜ì´ì§€ 1 -->
        <div class="page150 active150" id="page-1150">
            <div class="page-content150" style="background-image: url('/info/img1.png');">
                <div class="page-text150" style="font-weight: bold;">í™˜ì˜í•©ë‹ˆë‹¤! ì´ ì„¤ëª…ì„œëŠ” ì‚¬ìš©ë²•ì„ ì•ˆë‚´í•´ ë“œë¦½ë‹ˆë‹¤!</div>
            </div>
        </div>
        <!-- í˜ì´ì§€ 2 -->
        <div class="page150" id="page-2150">
            <div class="page-content150" style="background-image: url('/info/img2.png');">

            </div>
        </div>
        <!-- í˜ì´ì§€ 3 -->
        <div class="page150" id="page-3150">
            <div class="page-content150" style="background-image: url('/info/img3.png');">

            </div>
        </div>

        <div class="page150" id="page-4150">
            <div class="page-content150" style="background-image: url('/info/img4.png');">

            </div>
        </div>

        <div class="page150" id="page-5150">
            <div class="page-content150" style="background-image: url('/info/img5.png');">

            </div>
        </div>

        <div class="page150" id="page-6150">
            <div class="page-content150" style="background-image: url('/info/img6.png');">

            </div>
        </div>

        <div class="page150" id="page-7150">
            <div class="page-content150" style="background-image: url('/info/img7.png');">

            </div>
        </div>

        <div class="page150" id="page-8150">
            <div class="page-content150" style="background-image: url('/info/img8.png');">

            </div>
        </div>

        <div class="page150" id="page-9150">
            <div class="page-content150" style="background-image: url('/info/img9.png');">

            </div>
        </div>

        <div class="page150" id="page-10150">
            <div class="page-content150" style="background-image: url('/info/img10.png');">

            </div>
        </div>

        <div class="page150" id="page-11150">
            <div class="page-content150" style="background-image: url('/info/img11.png');">

            </div>
        </div>

        <div class="page150" id="page-12150">
            <div class="page-content150" style="background-image: url('/info/img11-2.png');">

            </div>
        </div>

        <div class="page150" id="page-13150">
            <div class="page-content150" style="background-image: url('/info/img12.png');">

            </div>
        </div>

        <div class="page150" id="page-14150">
            <div class="page-content150" style="background-image: url('/info/img13.png');">

            </div>
        </div>

        <div class="page150" id="page-15150">
            <div class="page-content150" style="background-image: url('/info/img14.png');">

            </div>
        </div>

        <!-- ë‹«ê¸° ë²„íŠ¼ -->
        <button class="close-button150" id="closeButton150">X</button>

        <!-- ì´ì „ ë²„íŠ¼ -->
        <button class="button150 prev150" id="prevButton150">ì´ì „</button>
        <!-- ë‹¤ìŒ ë²„íŠ¼ -->
        <button class="button150 next150" id="nextButton150">ë‹¤ìŒ</button>

        <!-- í˜ì´ì§€ ë²ˆí˜¸ í‘œì‹œ -->
        <div class="page-indicator150" style="color: red; font-weight: bold;" id="pageIndicator150">1/15</div>
    </div>
</div>


<script src="/js/main.js"></script>


<script src="/js/app.js"></script>
<script>

    // ì´ë¯¸ì§€ ì €ì¥ í•¨ìˆ˜
    function saveImage() {
        var canvas = document.getElementById("imageCanvas");
        var imageData = canvas.toDataURL("image/png");

        document.getElementById("imageData").value = imageData;
        document.getElementById("imageForm").submit();

        const canvasState = {
            backgroundImage: backgroundImage ? backgroundImage.src : null,
            penStrokes: penStrokes,
            brushStrokes: brushStrokes,
            texts: texts,
            rectangles: rectangles,
            rectfillangles: rectfillangles,
            backgroundColor: backgroundColor,
            currentFilter: filterLastValue,

        };
        const json = JSON.stringify(canvasState);

        // ì„œë²„ë¡œ JSON ë°ì´í„° ì „ì†¡
        if (json) { // null ì²´í¬
            fetch('/ai-Json', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: json
            })
                .then(response => {
                    // ì„œë²„ ì‘ë‹µ ì²˜ë¦¬
                })
                .catch(error => {
                    // ì˜¤ë¥˜ ì²˜ë¦¬
                });
        }
    }
</script>
<script>
    const categoryButton = document.getElementById('category');

    const returnButton = document.getElementById('square');
    const popup = document.getElementById('popup');

    categoryButton.addEventListener('click', (event) => {


        const rect = returnButton.getBoundingClientRect();
        const rightEdge = window.innerWidth;
        popup.style.top = `${rect.bottom}px`;
        if (rect.right + popup.offsetWidth > rightEdge) {
            popup.style.left = `${rect.left}px`;
        } else {
            popup.style.left = `${rect.right}px`;
        }
        togglePopup();
    });

    function togglePopup() {
        popup.style.display = (popup.style.display === 'block') ? 'none' : 'block';
    }

    document.addEventListener('click', (event) => {
        if (!popup.contains(event.target) && event.target !== categoryButton) {
            popup.style.display = 'none';
        }
    });

</script>

<script>
    const textButton = document.getElementById('textbutton');
    const color_tool = document.getElementById('text_color');
    const popup1 = document.getElementById('popup1');

    textButton.addEventListener('click', (event) => {
        const rect = color_tool.getBoundingClientRect();
        const rightEdge = window.innerWidth;
        popup1.style.top = `${rect.bottom}px`;
        popup1.style.left = `${rect.left - popup1.offsetWidth - 180}px`; // ìˆ˜ì •ëœ ë¶€ë¶„: ì™¼ìª½ì— ëœ¨ë„ë¡ ê³„ì‚°
        togglePopup1();
    });

    function togglePopup1() {
        popup1.style.display = (popup1.style.display === 'block') ? 'none' : 'block';
    }

    document.addEventListener('click', (event) => {
        if (!popup1.contains(event.target) && event.target !== textButton) {
            popup1.style.display = 'none';
        }
    });

</script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    let interval; // íƒ€ì´ë¨¸ ì¸í„°ë²Œì„ ì €ì¥í•  ì „ì—­ ë³€ìˆ˜
    let isTimerRunning = false; // íƒ€ì´ë¨¸ ë™ì‘ ì—¬ë¶€ë¥¼ í™•ì¸í•  ë³€ìˆ˜

    function startTimer(duration, display) {
        let timer = duration, minutes, seconds;

        if (interval) {
            clearInterval(interval); // ì´ì „ íƒ€ì´ë¨¸ ì •ì§€
        }

        interval = setInterval(function () {
            isTimerRunning = true; // íƒ€ì´ë¨¸ê°€ ë™ì‘ ì¤‘ì„ì„ í‘œì‹œ
            minutes = parseInt(timer / 60, 10);
            seconds = parseInt(timer % 60, 10);

            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;

            display.textContent = minutes + ":" + seconds;

            if (--timer < 0) {
                clearInterval(interval);
                display.textContent = "00:00";
                isTimerRunning = false; // íƒ€ì´ë¨¸ê°€ ëë‚¬ìŒì„ í‘œì‹œ
            }
        }, 1000);
    }

    $(document).ready(function () {
        let timeDisplay = $("#time");
        let duration = 40; // 40ì´ˆ
        let textList = []; // í…ìŠ¤íŠ¸ ë¦¬ìŠ¤íŠ¸ ì €ì¥ ë³€ìˆ˜
        let textIndex = 0; // í˜„ì¬ í…ìŠ¤íŠ¸ ì¸ë±ìŠ¤

        // ì´ë¯¸ì§€ ìƒì„± ë²„íŠ¼ í´ë¦­
        $("#imageButton").click(function () {
            // íƒ€ì´ë¨¸ê°€ ì´ë¯¸ ì‹¤í–‰ ì¤‘ì´ ì•„ë‹ˆë¼ë©´ íƒ€ì´ë¨¸ ì‹œì‘
            if (!isTimerRunning) {
                startTimer(duration, timeDisplay[0]);
            }

            // ì˜¤ë²„ë ˆì´ í‘œì‹œ
            $(".overlay-container").css("display", "flex");

            // AJAX ìš”ì²­ ë³´ë‚´ê¸°
            $.ajax({
                type: "POST",
                url: "/image-create",
                data: {
                    "prompt": $("#imageCreate").val()
                },
                success: function (data) {
                    // JSON ì‘ë‹µ ë°ì´í„° ì²˜ë¦¬
                    if (data.imagePath) {
                        setBackgroundImage(data.imagePath);
                    }
                    if (data.message) {
                        $("#textInput").val(data.message);

                        textList = data.text; // ì„œë²„ì—ì„œ ë°›ì€ í…ìŠ¤íŠ¸ ë¦¬ìŠ¤íŠ¸ ì €ì¥

                        textIndex = 0; // ì¸ë±ìŠ¤ ì´ˆê¸°í™”
                        addFilledSquare(100, 100);
                        // addTextToCanvas í•¨ìˆ˜ í˜¸ì¶œ
                        addTextToCanvas();
                    }
                },
                error: function (xhr, status, error) {
                    alert("ì´ë¯¸ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                    console.log(xhr.responseText);
                    // 1ì´ˆ í›„ì— í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
                    setTimeout(function () {
                        location.reload();
                    }, 1000);
                },
                complete: function () {
                    // ì˜¤ë²„ë ˆì´ ìˆ¨ê¹€
                    $(".overlay-container").hide();
                }
            });
        });

        // í…ìŠ¤íŠ¸ ì¶”ê°€ ë²„íŠ¼ ì²˜ë¦¬
        $("#addTexTAIButton2").click(function () {
            if (textList.length > 0) {
                if (textIndex < textList.length) {
                    $("#textInput").val(textList[textIndex]); // í…ìŠ¤íŠ¸ ì¶œë ¥
                    textIndex++;
                    if (textIndex >= textList.length) {
                        textIndex = 0; // ì¸ë±ìŠ¤ë¥¼ ì²˜ìŒìœ¼ë¡œ ë¦¬ì…‹
                    }
                }
            } else {
                $("#textInput").val("ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” AI ë¬¸êµ¬ê°€ ì—†ìŠµë‹ˆë‹¤.");
            }
        });
    });



</script>

<script>
    function addFilledSquare(x, y) {
        const lineWidth = ctx.lineWidth * 20; // Adjust size as needed
        const rect = {
            x: 10,
            y: 600,
            width: 720,
            height: lineWidth,
            color: 'white',
            lineWidth: ctx.lineWidth
        };
        rectfillangles.push(rect);
        redrawCanvas();
    }
</script>


<script>
    document.getElementById('save5').addEventListener('click', function() {
        document.getElementById('popup5').style.display = 'flex';
    });

    document.getElementById('close5').addEventListener('click', function() {
        document.getElementById('popup5').style.display = 'none';
    });

    document.getElementById('cancel5').addEventListener('click', function() {
        document.getElementById('popup5').style.display = 'none';
    });

    document.getElementById('popup-form5').addEventListener('submit', function(event) {
        event.preventDefault();

        document.getElementById('popup5').style.display = 'none';
    });
</script>

<script>
    // íœ ìƒ‰ê¹” ì§€ì • íŒì—…ì„ ë“œë˜ê·¸í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” í•¨ìˆ˜
    function dragElement(element) {
        var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;

        element.onmousedown = function (e) {
            e = e || window.event;
            e.preventDefault();
            // ë§ˆìš°ìŠ¤ ì‹œì‘ ì¢Œí‘œ ê¸°ë¡
            pos3 = e.clientX;
            pos4 = e.clientY;
            document.onmouseup = closeDragElement;
            document.onmousemove = elementDrag;
        };

        function elementDrag(e) {
            e = e || window.event;
            e.preventDefault();
            // ë§ˆìš°ìŠ¤ ì›€ì§ì„ì— ë”°ë¥¸ íŒì—…ì˜ ìƒˆ ì¢Œí‘œ
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            // íŒì—… ìœ„ì¹˜ ì—…ë°ì´íŠ¸
            element.style.top = (element.offsetTop - pos2) + "px";
            element.style.left = (element.offsetLeft - pos1) + "px";
        }

        function closeDragElement() {
            // ë§ˆìš°ìŠ¤ ë²„íŠ¼ì„ ë–¼ë©´ ë“œë˜ê·¸ ì¤‘ì§€
            document.onmouseup = null;
            document.onmousemove = null;
        }
    }

    // íŒì—…ì°½ì„ ë“œë˜ê·¸ ê°€ëŠ¥í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.
    dragElement(document.querySelector(".popup5"));
    dragElement(document.querySelector(".popup3"));  // ì‚¬ê°í˜• ìƒ‰ê¹” íŒì—…
    dragElement(document.querySelector(".popup4"));  // ìƒ‰ì±„ìš´ ì‚¬ê°í˜• íŒì—…
    dragElement(document.querySelector("#filterPopup5"));  // í•„í„° ì„ íƒ íŒì—…
</script>

<script>
    // ë¹ˆì‚¬ê°í˜• ë¬´ì§€ê°œ ë²„íŠ¼ í´ë¦­ ì‹œ ìƒ‰ìƒ ì„ íƒê¸° íˆ¬ëª…ë„ë¥¼ ì—†ì•°
    document.getElementById('rainbowCircle1').addEventListener('click', function() {
        const colorPicker = document.getElementById('rectColorPicker');
        colorPicker.style.opacity = '1';  // íˆ¬ëª…ë„ ì—†ì•°
        colorPicker.click();  // ê¸°ë³¸ ìƒ‰ìƒ ì„ íƒê¸° ì°½ì„ ë°”ë¡œ ì—´ê¸°
    });
    // ìƒ‰ì±„ìš´ ì‚¬ê°í˜• ë¬´ì§€ê°œ ë²„íŠ¼ í´ë¦­ ì‹œ ìƒ‰ìƒ ì„ íƒê¸° íˆ¬ëª…ë„ë¥¼ ì—†ì•°
    document.getElementById('rainbowCircle2').addEventListener('click', function() {
        const colorPicker = document.getElementById('rectColorPicker2');
        colorPicker.style.opacity = '1';  // íˆ¬ëª…ë„ ì—†ì•°
        colorPicker.click();  // ê¸°ë³¸ ìƒ‰ìƒ ì„ íƒê¸° ì°½ì„ ë°”ë¡œ ì—´ê¸°
    });

    // íœ ìƒ‰ê¹” ì§€ì • íŒì—… ë¬´ì§€ê°œ ë²„íŠ¼ í´ë¦­ ì‹œ ìƒ‰ìƒ ì„ íƒê¸° íˆ¬ëª…ë„ë¥¼ ì—†ì•°
    document.getElementById('rainbowCircle3').addEventListener('click', function() {
        const colorPicker = document.getElementById('rectColorPicker3');
        colorPicker.style.opacity = '1';  // íˆ¬ëª…ë„ ì—†ì•°
        colorPicker.click();  // ê¸°ë³¸ ìƒ‰ìƒ ì„ íƒê¸° ì°½ì„ ë°”ë¡œ ì—´ê¸°
    });

</script>

<script>
    let currentPage150 = 1;
    const totalPages150 = 15;

    const prevButton150 = document.getElementById('prevButton150');
    const nextButton150 = document.getElementById('nextButton150');
    const closeButton150 = document.getElementById('closeButton150');
    const pages150 = document.querySelectorAll('.page150');
    const pageIndicator150 = document.getElementById('pageIndicator150');
    const popupBackground150 = document.querySelector('.popup-background150');

    function updatePage150(direction) {
        // í˜„ì¬ í˜ì´ì§€ ìˆ¨ê¸°ê¸°
        const currentElement150 = document.getElementById(`page-${currentPage150}150`);
        currentElement150.classList.remove('active150');

        // í˜ì´ì§€ ë³€ê²½
        if (direction === 'next') {
            currentPage150 = currentPage150 < totalPages150 ? currentPage150 + 1 : 1;
        } else if (direction === 'prev') {
            currentPage150 = currentPage150 > 1 ? currentPage150 - 1 : totalPages150;
        }

        // ìƒˆ í˜ì´ì§€ ë³´ì—¬ì£¼ê¸°
        const nextElement150 = document.getElementById(`page-${currentPage150}150`);
        nextElement150.classList.add('active150');

        // í˜ì´ì§€ ë²ˆí˜¸ ì—…ë°ì´íŠ¸
        pageIndicator150.textContent = `${currentPage150}/${totalPages150}`;

        // ë§ˆì§€ë§‰ í˜ì´ì§€ì¼ ë•Œ ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½
        if (currentPage150 === totalPages150) {
            nextButton150.textContent = 'ë‹«ê¸°';
            nextButton150.removeEventListener('click', nextClickHandler);
            nextButton150.addEventListener('click', () => popupBackground150.style.display = 'none');
        } else {
            nextButton150.textContent = 'ë‹¤ìŒ';
            nextButton150.removeEventListener('click', closePopupHandler);
            nextButton150.addEventListener('click', nextClickHandler);
        }
    }

    function nextClickHandler() {
        updatePage150('next');
    }

    function closePopupHandler() {
        popupBackground150.style.display = 'none';
    }

    nextButton150.addEventListener('click', nextClickHandler);
    prevButton150.addEventListener('click', () => updatePage150('prev'));
    closeButton150.addEventListener('click', closePopupHandler);
    // Info ë²„íŠ¼ í´ë¦­ ì‹œ íŒì—… ë³´ì—¬ì£¼ê¸°
    const infoButton = document.getElementById('info');

    infoButton.addEventListener('click', () => {
        popupBackground150.style.display = 'flex'; // íŒì—…ì„ ë³´ì—¬ì¤Œ
    });

</script>

</body>

</html>